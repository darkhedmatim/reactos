#include <stdlib.h>
#include <stdio.h>
#include <ctype.h>
#include "hello.h"    // header file generated by MIDL compiler
#include "string.h"

void __cdecl wmain(int argc, char * argv[])
{
    RPC_STATUS status;

	status = RpcServerUseProtseqEp(L"ncacn_np", 20, L"\\pipe\\audsrv", NULL);
    printf("RpcServerUseProtseqEp returned  0x%x\n", status);

    status = RpcServerRegisterIfEx(hello_v1_0_s_ifspec, NULL, NULL, 0, RPC_C_LISTEN_MAX_CALLS_DEFAULT, NULL );
    printf("RpcServerRegisterIfEx returned 0x%x\n", status);   

    printf("Calling RpcServerListen\n");

    status = RpcServerListen(1,20,FALSE);
    printf("RpcServerListen returned: 0x%x\n", status);


}

void __RPC_FAR * __RPC_USER midl_user_allocate(SIZE_T len)
{
    return(malloc(len));
}

void __RPC_USER midl_user_free(void __RPC_FAR * ptr)
{
    free(ptr);
}
