add_definitions(-DBZ_NO_STDIO -DBZ_DECOMPRESS_ONLY)

file(GLOB_RECURSE SOURCE "*.c")
LIST(REMOVE_ITEM SOURCE ${CMAKE_CURRENT_SOURCE_DIR}/compress.c ${CMAKE_CURRENT_SOURCE_DIR}/randtable.c ${CMAKE_CURRENT_SOURCE_DIR}/bzip2recover.c ${CMAKE_CURRENT_SOURCE_DIR}/blocksort.c ${CMAKE_CURRENT_SOURCE_DIR}/bzip2.c ${CMAKE_CURRENT_SOURCE_DIR}/dlltest.c ${CMAKE_CURRENT_SOURCE_DIR}/spewG.c ${CMAKE_CURRENT_SOURCE_DIR}/unzcrash.c)

add_library(bzip2 ${SOURCE})